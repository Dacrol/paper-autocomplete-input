<link rel="import" href="../polymer/polymer.html">

<!--

By default the paper-autocomplete-item would look like that:

    <paper-item>
        [[getItemString(item)]]
    </paper-item>

-->

<dom-module id="paper-autocomplete-item">
</dom-module>

<script>
  Polymer({

    is: 'paper-autocomplete-item',

    behaviors: [Polymer.Templatizer],

    properties: {
        /**
         * `templateClass` is the template class you obtain with this line: `Polymer.Templatize.templatize(template, dataHost);`
         *
         * @type Object
         */
        templateClass: {
          type: Object,
          observer: "_templatize"
        },
        _instance: Object,

        /**
         * `item` is the item instance from the list
         *
         * @type Object
         */
        item: Object,

        /**
         * `index` is the item index from the list
         *
         * @type Number
         */
        index: Number
    },

    observers: [
        "_onItemChange(_instance, item, index)"
    ],

    _templatize: function (n, o) {
        if (this._instance) return;

        let instance = new this.templateClass({});
        Polymer.dom(this).appendChild(instance.root);

        this.set("_instance", instance);
    },

    _onItemChange: function (_instance, item, index) {
        if (_instance === undefined || item === undefined || index === undefined) return;
        this._instance.item = item;
        this._instance.index = index;
    }

  });
</script>
